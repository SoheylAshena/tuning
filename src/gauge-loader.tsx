import { useRef, useEffect } from "react";
import { gsap } from "gsap";

import "./gauge.css";
import { useProgress } from "@react-three/drei";

// function rempo(value: number) {
//   return (value / 100) * 240;
// }

export default function GaugeLoader() {
  const { progress } = useProgress();

  const divRef = useRef<HTMLDivElement>(null);
  // const handRef = useRef<SVGGElement>(null);

  // useEffect(() => {
  //   if (!handRef.current) return;
  //   handRef.current.style.transformOrigin = "182px 18px";
  // }, []);

  // useEffect(() => {
  //   if (!handRef.current) return;
  //   gsap.killTweensOf(handRef.current);

  //   gsap.to(handRef.current, {
  //     rotation: rempo(progress),
  //     duration: 0.5,
  //     ease: "power2.inOut",
  //     overwrite: true,
  //     onComplete: () => {
  //       if (progress === 100 && divRef.current) {
  //         gsap.to(divRef.current, {
  //           delay: 1,
  //           opacity: 0,
  //           onComplete: () => {
  //             divRef.current!.style.display = "none";
  //           },
  //         });
  //       }
  //     },
  //   });
  // }, [progress]);

  useEffect(() => {
    if (!divRef.current) return;
    if (progress === 100 && divRef.current) {
      gsap.to(divRef.current, {
        delay: 1,
        opacity: 0,
        onComplete: () => {
          divRef.current!.style.display = "none";
        },
      });
    }
  }, [progress]);

  return (
    <div
      ref={divRef}
      className="w-full bg-[#aaaaaa] h-full flex items-center flex-col justify-center absolute top-0 left-0 z-50 "
    >
      <p>{progress.toFixed()}%</p>
    </div>
  );
}

/*  <svg viewBox="0 0 413.63 313.54" width="420">
        <defs>
          <linearGradient
            id="linear-gradient"
            x1="228.75"
            y1="99.47"
            x2="259.53"
            y2="99.47"
            gradientTransform="translate(163.13 514.07) rotate(-120.05)"
            gradientUnits="userSpaceOnUse"
          >
            <stop offset="0" stop-color="#fdba12" />
            <stop offset=".23" stop-color="#fbb812" />
            <stop offset=".31" stop-color="#f4b213" />
            <stop offset=".37" stop-color="#e8a815" />
            <stop offset=".42" stop-color="#d79918" />
            <stop offset=".46" stop-color="#c1861b" />
            <stop offset=".49" stop-color="#a76e20" />
            <stop offset=".52" stop-color="#8f5a24" />
            <stop offset=".54" stop-color="#93612e" />
            <stop offset=".57" stop-color="#a1764a" />
            <stop offset=".61" stop-color="#b69778" />
            <stop offset=".65" stop-color="#d3c5b7" />
            <stop offset=".69" stop-color="#ededed" />
            <stop offset=".7" stop-color="#eee7dd" />
            <stop offset=".71" stop-color="#f2dbbd" />
            <stop offset=".74" stop-color="#f5d1a2" />
            <stop offset=".76" stop-color="#f8c98c" />
            <stop offset=".79" stop-color="#fac37b" />
            <stop offset=".82" stop-color="#fbbf6f" />
            <stop offset=".87" stop-color="#fcbc68" />
            <stop offset="1" stop-color="#fdbc67" />
          </linearGradient>
          <linearGradient
            id="linear-gradient-2"
            x1="253.75"
            y1="201.43"
            x2="234.53"
            y2="182.2"
            gradientTransform="translate(163.13 514.07) rotate(-120.05)"
            gradientUnits="userSpaceOnUse"
          >
            <stop offset="0" stop-color="#ededed" />
            <stop offset=".09" stop-color="#efe5d9" />
            <stop offset=".28" stop-color="#f4d6b0" />
            <stop offset=".48" stop-color="#f8cb90" />
            <stop offset=".67" stop-color="#fac279" />
            <stop offset=".85" stop-color="#fcbd6b" />
            <stop offset="1" stop-color="#fdbc67" />
          </linearGradient>
        </defs>
        <g id="Layer_1-2" data-name="Layer 1">
          <g id="shape">
            <path
              className="cls-3"
              d="M327.43,270.01c.18-.34.36-.69.54-1.03.15-.3.3-.6.45-.89.18-.35.36-.71.53-1.06.14-.29.28-.57.42-.86.18-.37.36-.74.53-1.11.13-.27.25-.54.38-.82.18-.39.36-.78.54-1.17.1-.23.2-.45.3-.68.68-1.53,1.34-3.08,1.97-4.63.09-.22.18-.44.27-.66.16-.4.31-.8.47-1.21.11-.28.22-.55.32-.83.15-.38.29-.77.43-1.16.11-.3.22-.59.33-.89.14-.38.27-.75.4-1.13.11-.31.22-.62.33-.93.13-.37.25-.74.37-1.11.11-.32.21-.64.32-.96.12-.37.23-.74.35-1.11.1-.33.21-.65.31-.98.11-.37.22-.73.33-1.1.1-.33.2-.67.29-1,.1-.36.21-.73.31-1.09.09-.34.19-.68.28-1.02.1-.36.19-.72.29-1.09.09-.34.18-.69.27-1.03.09-.36.18-.72.27-1.08.09-.35.17-.69.25-1.04.09-.36.17-.72.25-1.08.08-.35.16-.7.24-1.06.08-.36.16-.72.23-1.07.08-.36.15-.71.22-1.07.07-.36.14-.71.21-1.07.07-.36.14-.72.21-1.08.07-.36.13-.71.2-1.07.07-.36.13-.73.19-1.09.06-.35.12-.71.18-1.06.06-.37.12-.74.17-1.11.05-.35.11-.7.16-1.06.05-.37.11-.75.16-1.12.05-.35.1-.7.14-1.05.05-.38.1-.76.14-1.14.04-.35.08-.69.12-1.04.04-.39.08-.77.12-1.16.04-.34.07-.68.11-1.02.04-.39.07-.78.11-1.18.03-.34.06-.67.09-1.01.03-.4.06-.8.09-1.2.02-.33.05-.66.07-.99.03-.42.05-.83.07-1.25.02-.32.04-.63.05-.95.02-.44.04-.88.05-1.32.01-.3.03-.59.04-.89.02-.49.03-.98.04-1.46,0-.25.01-.49.02-.74.01-.74.02-1.47.02-2.21,0-18.38-3.6-36.21-10.7-53-1.1-2.6-2.28-5.16-3.53-7.67-6.55-13.16-15.15-25.11-25.65-35.6-10.49-10.49-22.43-19.09-35.57-25.63-2.53-1.26-5.09-2.44-7.71-3.55-16.79-7.1-34.62-10.7-53-10.7s-36.21,3.6-53,10.7c-2.62,1.11-5.2,2.3-7.73,3.56-6.65,3.31-12.98,7.15-18.98,11.49-5.86,4.24-11.39,8.95-16.57,14.13-5.12,5.12-9.78,10.58-13.98,16.36-4.41,6.07-8.3,12.48-11.65,19.21-1.26,2.53-2.44,5.1-3.55,7.71-7.1,16.79-10.7,34.62-10.7,53,0,.73,0,1.47.02,2.2,0,.24.01.48.02.72.01.49.02.98.04,1.47,0,.29.02.58.03.87.02.44.03.88.05,1.32.02.31.03.62.05.93.02.42.05.84.07,1.26.02.32.05.64.07.96.03.41.06.82.09,1.23.03.33.06.65.09.98.04.4.07.8.11,1.2.03.33.07.66.1.99.04.39.08.79.13,1.18.04.33.08.67.12,1,.05.39.09.78.14,1.17.04.34.09.67.14,1.01.05.39.11.77.16,1.16.05.34.1.67.15,1.01.06.38.12.77.18,1.15.05.34.11.67.17,1.01.06.38.13.76.2,1.14.06.34.12.68.19,1.01.07.38.14.75.22,1.13.07.34.13.68.2,1.01.08.37.15.75.23,1.12.07.34.14.68.22,1.02.08.37.16.74.25,1.11.08.34.16.68.24,1.02.09.37.18.74.27,1.1.08.34.17.68.25,1.02.09.36.19.73.28,1.09.09.34.18.68.27,1.02.1.36.2.72.3,1.08.1.34.19.68.29,1.02.1.36.21.71.31,1.07.1.34.2.68.31,1.02.11.35.22.7.33,1.05.11.34.21.69.32,1.03.11.35.23.69.34,1.04.11.35.23.69.35,1.04.11.34.23.67.35,1.01.12.35.24.7.37,1.05.12.33.24.65.36.98.13.36.26.71.39,1.07.12.31.24.62.36.92.14.37.28.74.43,1.11.1.25.2.5.3.75.62,1.55,1.27,3.08,1.95,4.6.09.2.17.4.26.6.19.42.38.83.57,1.25.11.24.22.49.34.73.19.4.38.8.58,1.2.12.25.24.51.37.76.19.39.39.78.59,1.17.13.26.26.51.39.77.2.39.4.77.6,1.16.13.26.27.52.4.77.2.38.41.76.62,1.14.11.19.21.39.31.58.05.08.09.17.14.25.1.19.21.37.31.56.26.46.52.92.78,1.38.05.08.09.17.14.25h0s0,0,0,0l.47-.27.5-.29c-.32-.56-.64-1.13-.96-1.69-.09-.15-.17-.31-.26-.46-.17-.3-.33-.6-.49-.9-.2-.36-.39-.72-.58-1.08-.15-.28-.3-.56-.44-.84-.19-.35-.37-.71-.55-1.07-.15-.29-.3-.59-.44-.88-.18-.35-.35-.7-.52-1.05-.15-.3-.29-.61-.44-.91-.17-.34-.33-.68-.49-1.03-.15-.32-.3-.64-.44-.96-.15-.33-.31-.66-.46-1-.16-.35-.31-.7-.47-1.05-.14-.31-.27-.61-.41-.92-.25-.58-.49-1.15-.73-1.73-.12-.3-.25-.6-.37-.9-.18-.45-.36-.89-.54-1.34-.11-.28-.21-.56-.32-.83-.15-.39-.31-.79-.46-1.18-.11-.3-.22-.59-.33-.89-.14-.38-.28-.76-.42-1.14-.11-.3-.21-.61-.32-.91-.13-.37-.26-.75-.39-1.13-.11-.31-.21-.62-.31-.93-.12-.37-.25-.74-.37-1.12-.1-.32-.2-.63-.3-.95-.12-.37-.23-.74-.35-1.11-.1-.32-.19-.64-.29-.96-.11-.37-.22-.74-.33-1.11-.09-.32-.18-.65-.27-.97-.1-.37-.21-.74-.31-1.11-.09-.33-.17-.65-.26-.98-.1-.37-.19-.74-.29-1.11-.08-.33-.16-.66-.24-.99-.09-.37-.18-.74-.27-1.12-.08-.33-.15-.66-.23-.99-.09-.37-.17-.75-.25-1.12-.07-.33-.14-.66-.21-1-.08-.37-.16-.75-.23-1.12-.07-.33-.13-.67-.2-1-.07-.38-.14-.75-.21-1.13-.06-.33-.12-.67-.18-1-.07-.38-.13-.75-.2-1.13-.06-.33-.11-.67-.17-1-.06-.38-.12-.76-.18-1.14-.05-.33-.1-.67-.15-1-.06-.38-.11-.76-.16-1.14-.05-.33-.09-.67-.13-1-.05-.38-.1-.77-.14-1.15-.04-.33-.08-.67-.12-1-.04-.39-.08-.78-.12-1.17-.03-.33-.07-.66-.1-.99-.04-.39-.07-.79-.11-1.18-.03-.33-.06-.65-.09-.98-.03-.4-.06-.8-.09-1.2-.02-.32-.05-.64-.07-.96-.03-.41-.05-.83-.07-1.24-.02-.31-.04-.62-.05-.93-.02-.44-.04-.87-.05-1.31-.01-.29-.02-.58-.03-.87-.02-.49-.03-.97-.04-1.46,0-.24-.01-.48-.02-.72-.01-.73-.02-1.45-.02-2.18,0-74.46,60.57-135.03,135.03-135.03s135.03,60.57,135.03,135.03c0,.73,0,1.46-.02,2.19,0,.24-.01.48-.02.72-.01.49-.02.98-.04,1.47,0,.28-.02.57-.03.85-.02.44-.03.89-.05,1.33-.01.3-.03.6-.05.9-.02.43-.05.85-.07,1.28-.02.31-.04.62-.07.92-.03.42-.06.84-.09,1.25-.03.31-.05.62-.08.93-.04.41-.07.83-.11,1.24-.03.31-.06.63-.1.94-.04.41-.09.82-.13,1.23-.04.31-.07.63-.11.94-.05.41-.1.82-.15,1.23-.04.31-.08.62-.13.94-.06.41-.11.82-.17,1.23-.05.31-.09.62-.14.93-.06.41-.13.82-.19,1.23-.05.31-.1.61-.15.92-.07.41-.14.82-.21,1.23-.05.31-.11.61-.17.91-.08.41-.15.82-.23,1.23-.06.3-.12.6-.18.9-.08.41-.17.82-.26,1.23-.06.3-.13.6-.19.9-.09.41-.18.82-.28,1.23-.07.3-.14.59-.21.89-.1.41-.2.82-.3,1.23-.07.29-.14.58-.22.88-.1.41-.21.83-.32,1.24-.08.29-.15.58-.23.86-.11.41-.23.83-.34,1.24-.08.28-.16.57-.24.85-.12.41-.24.83-.37,1.24-.08.28-.17.56-.25.84-.13.41-.26.83-.39,1.24-.09.28-.17.56-.26.83-.13.41-.27.83-.41,1.24-.09.27-.18.55-.28.82-.14.41-.29.83-.43,1.24-.1.27-.19.54-.29.82-.15.41-.3.82-.45,1.24-.1.27-.2.54-.3.8-.16.41-.32.82-.48,1.24-.1.26-.2.53-.31.79-.16.41-.33.82-.5,1.23-.31.76-.63,1.52-.95,2.28-.07.15-.13.31-.19.46-.19.44-.39.88-.58,1.31-.1.22-.19.44-.29.66-.2.44-.41.88-.61,1.32-.1.21-.19.42-.29.63-.21.45-.43.89-.65,1.34-.1.2-.19.4-.29.59-.23.46-.46.91-.69,1.37-.09.18-.18.37-.28.55-.24.47-.48.93-.73,1.39-.09.17-.18.34-.27.51-.25.48-.51.95-.77,1.42-.09.17-.19.35-.28.52-.12.22-.24.43-.36.65-.3.54-.6,1.07-.91,1.6,0,0,0,.02-.01.02h0s0,0,0,0l.48.28.49.29c.33-.57.65-1.14.98-1.71.08-.14.16-.29.24-.43.06-.1.11-.2.17-.3.13-.23.25-.46.38-.69.18-.33.37-.67.55-1.01.16-.3.32-.61.48-.91Z"
            />
            <path
              className="cls-3"
              d="M397.38,126.31c-10.42-24.63-25.33-46.75-44.32-65.74-18.99-18.99-41.11-33.91-65.74-44.32C261.82,5.47,234.73,0,206.81,0s-55.01,5.47-80.5,16.25c-24.63,10.42-46.75,25.33-65.74,44.32-18.99,18.99-33.91,41.11-44.32,65.74C5.47,151.81,0,178.89,0,206.81s5.47,55.01,16.25,80.5c2.97,7.03,6.31,13.86,10.01,20.46.91,1.63,1.85,3.25,2.81,4.86l1.05-.61c-.96-1.61-1.9-3.23-2.82-4.86C10.64,277.47,1.12,243.23,1.12,206.81,1.12,93.4,93.4,1.12,206.81,1.12s205.69,92.27,205.69,205.69c0,36.48-9.55,70.78-26.28,100.52l1.05.6c3.73-6.65,7.1-13.53,10.1-20.62,10.78-25.5,16.25-52.58,16.25-80.5s-5.47-55.01-16.25-80.5Z"
            />
            <path d="M408.8,206.93v-.11c0-25.39-4.65-50.15-13.83-73.59-8.86-22.64-21.64-43.32-37.98-61.48-2.28-2.54-4.65-5.03-7.07-7.47-2.43-2.44-4.92-4.81-7.45-7.11l-.42-.38c-18.15-16.37-38.84-29.18-61.49-38.07-23.45-9.2-48.22-13.87-73.64-13.89h-.56c-25.24.06-49.84,4.71-73.14,13.83-22.64,8.86-43.32,21.64-61.48,37.98-5.21,4.69-10.25,9.72-14.96,14.94-16.37,18.15-29.18,38.84-38.07,61.49-9.2,23.45-13.87,48.22-13.89,73.64v.11c0,27.27,5.34,53.72,15.87,78.62,2.9,6.85,6.14,13.49,9.74,19.92.91,1.64,1.85,3.26,2.81,4.86l1.05-.61s-.03-.04-.04-.07l19.79-11.42s.02.04.04.06l.97-.56s-.02-.04-.04-.06l13.62-7.87-2.81-4.86-34.39,19.85c-2.78-4.96-5.35-10.05-7.71-15.26l21.4-9.53-.91-2.05-21.4,9.53c-2.51-5.71-4.76-11.56-6.74-17.53l22.29-7.24-.69-2.14-22.3,7.24c-1.89-5.93-3.52-11.99-4.86-18.14l22.95-4.88-.47-2.2-22.95,4.88c-1.25-6.09-2.23-12.28-2.92-18.55l23.35-2.45-.23-2.23-23.34,2.45c-.55-5.63-.87-11.32-.95-17.07h39.75v-5.62H5.98c.08-5.72.41-11.42.97-17.07l23.34,2.45.23-2.23-23.34-2.45c.69-6.24,1.67-12.43,2.94-18.55l22.94,4.88.47-2.2-22.94-4.88c1.34-6.13,2.96-12.18,4.86-18.14l22.31,7.25.69-2.14-22.31-7.25c1.97-5.95,4.22-11.8,6.74-17.53l21.43,9.54.91-2.05-21.43-9.54c2.35-5.19,4.92-10.28,7.71-15.26l34.44,19.89,2.81-4.86-34.44-19.88c2.92-4.88,6.05-9.65,9.39-14.29l18.99,13.79,1.32-1.82-18.99-13.79c3.7-5.02,7.65-9.89,11.84-14.58l17.44,15.71,1.5-1.67-17.44-15.7c4.21-4.62,8.67-9.07,13.29-13.27l15.7,17.44,1.67-1.5-15.7-17.44c4.7-4.18,9.57-8.12,14.6-11.82l13.79,18.99,1.82-1.32-13.79-18.99c4.64-3.33,9.41-6.46,14.3-9.37l19.88,34.44,4.86-2.81-19.88-34.44c4.98-2.78,10.08-5.35,15.27-7.7l9.54,21.43,2.05-.91-9.54-21.43c5.74-2.51,11.59-4.75,17.54-6.72l7.25,22.3,2.14-.69-7.25-22.3c5.96-1.89,12.02-3.51,18.15-4.84l4.88,22.94,2.2-.47-4.88-22.94c6.12-1.26,12.31-2.23,18.55-2.92l2.45,23.34,2.23-.23-2.45-23.34c5.65-.56,11.35-.88,17.07-.95v39.75h5.62V5.98c3.41.05,6.8.18,10.18.4.77.05,1.54.11,2.32.16,1.53.12,3.05.25,4.57.4l-2.45,23.34,2.23.23,2.45-23.34c6.24.69,12.43,1.67,18.55,2.94l-4.88,22.94,2.2.47,4.88-22.94c6.13,1.34,12.18,2.96,18.14,4.86l-7.25,22.3,2.14.69,7.25-22.3c5.95,1.97,11.8,4.22,17.53,6.74l-9.54,21.43,2.05.91,9.54-21.43c5.19,2.35,10.28,4.92,15.26,7.71l-19.88,34.44,4.86,2.81,19.88-34.44c4.88,2.92,9.65,6.05,14.29,9.39l-13.79,18.99,1.82,1.32,13.79-18.99c5.02,3.7,9.89,7.65,14.58,11.84l-15.71,17.44.42.38h0s.42.37.42.37l.84.75,15.7-17.44c4.62,4.21,9.07,8.68,13.27,13.29l-17.44,15.7,1.5,1.67,17.44-15.7c4.18,4.7,8.12,9.57,11.82,14.6l-18.99,13.79,1.32,1.82,18.99-13.79c3.33,4.64,6.46,9.41,9.37,14.3l-34.44,19.89,2.81,4.86,34.44-19.88c2.78,4.98,5.35,10.08,7.7,15.27l-21.43,9.54.91,2.05,21.43-9.54c2.51,5.74,4.75,11.59,6.72,17.54l-22.31,7.25.69,2.14,22.3-7.25c1.89,5.96,3.51,12.02,4.84,18.15l-22.94,4.88.47,2.2,22.94-4.88c1.26,6.12,2.23,12.31,2.92,18.55l-23.34,2.45.23,2.23,23.34-2.45c.56,5.65.88,11.35.95,17.07h-39.75v5.62h39.75c-.08,5.75-.41,11.44-.97,17.07l-23.34-2.45-.23,2.23,23.34,2.45c-.69,6.27-1.68,12.46-2.94,18.55l-22.95-4.88-.47,2.2,22.95,4.88c-1.35,6.16-2.98,12.21-4.88,18.14l-22.29-7.24-.69,2.14,22.29,7.24c-1.99,5.97-4.24,11.81-6.76,17.52l-21.4-9.53-.91,2.05,21.39,9.52c-2.37,5.2-4.95,10.29-7.73,15.25l-34.39-19.85-2.81,4.86,13.62,7.86s-.02.03-.03.05l.97.56s.02-.03.03-.05l19.78,11.42s-.01.02-.02.04l1.06.61c.96-1.61,1.9-3.23,2.81-4.86,3.62-6.46,6.89-13.14,9.8-20.01,10.54-24.89,15.89-51.33,15.9-78.58Z" />
          </g>
        </g>

         only change: wrap the hand group 
        <g ref={handRef} filter="url(#handGlow)">
          <path
            className="cls-2"
            d="M199.22,193.38c-4.79,2.77-7.53,7.73-7.68,12.89L23.72,311.54c-.43.26-.53.88-.23,1.4.3.52.89.74,1.33.5l175.06-93.06c4.5,2.32,10.05,2.37,14.76-.36,4.37-2.53,7.03-6.87,7.58-11.52l8.17-4.34c2.77-1.47,3.51-5.36,1.64-8.6l-2.82-4.87c-1.87-3.23-5.61-4.53-8.27-2.86l-7.7,4.83c-4.36-1.95-9.56-1.86-14.01.72Z"
          />
          <circle className="cls-1" cx="206.93" cy="206.7" r="13.59" />
        </g>
      </svg> */
